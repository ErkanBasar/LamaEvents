{% extends 'base.html' %}
{% load staticfiles %}

{% block title %}LaMa Events{% endblock %}



{% block head %}

<script src="{% static 'dbcon/jquery/jquery-1.11.1.min.js' %}"></script>
<script src="{% static 'dbcon/jquery/jquery-ui-1.11.1/jquery-ui.js' %}"></script>

<link rel="stylesheet" href="{% static 'dbcon/jquery/jquery-ui-themes-1.11.1/themes/smoothness/jquery-ui.css' %}"/>

<link rel="stylesheet" type="text/css" href="{% static 'dbcon/dbcon.css' %}" />

{% endblock %}



{% block script %}

$(function() {
	var pickerOpts = {
		dateFormat: 'dd-mm-yy',
		changeMonth: true,
		changeYear: true,
		showAnim: 'drop',
	};  
	$( "#datepicker" ).datepicker(pickerOpts);
    $( "#datepicker2" ).datepicker(pickerOpts);
});

{% endblock %}



{% block header %}

<img id="logo" src="{% static 'dbcon/images/lama-logo.png' %}" alt="Lama-Logo">

<h1>LaMa Events</h1>

{% endblock %}



{% block primary %}

<br>
<form method="post">                                                             
	{% csrf_token %}
	Date Range : 
	<input type="text" name="start_date" id="datepicker" value="Start Date" required/> 
	and 
	<input type="text" name="end_date" id="datepicker2" value="End Date" required/>
	<button type="submit" name="date_picker">Submit</button>
</form>


<form method="post">                                                             
	{% csrf_token %}
	Hour :
	<input type="text" name="search_hour"  required/> 
	Range : 
	<input type="text" name="hour_range"  required/> 
	<button type="submit" name="ttee">Submit</button>
</form>



{% if totallist%}

	<h3>{{ next30 }}</h3>
	<h3>{{ dateRangetext }}<h3>

	<table >
		{% for x in totallist %}
			{% if forloop.counter0|divisibleby:5 %}<tr>{% endif %}
				{% if not x.eventObjlist %}
					{{ x.eventObjectlist }}
					<td id="outnoevetd">
						<table>
							<tr><a id ="noevent">{{ x.datelist }}</a></tr>
							<td id="innertd">  </td>
						</table>
					</td>
				{% else %}
					<td id="outevetd"><a href="/{{ x.datelist }}/events" id="event">
						<table>
							<tr>{{ x.datelist }}</tr>
							<td id="innertd">
								<ul id="inbox">
									&#x25BF &nbsp EVENTS &nbsp &#x25BF
									{% for eventObj in x.eventObjlist %}
										<div id="keylistbox">
											{% for keys in eventObj.keylist %}
													{{ keys }}
											{% endfor %}
										</div>
									{% endfor %}
								</ul>
							</td>
						</table></a>
					</td>
			{% endif %}
			{% if forloop.counter|divisibleby:5 %}<tr>{% endif %}
		{% endfor %}
	</table>



{% elif event_list %}

	<br>
	<h3>The events between {{ startHour }} and {{ endHour }} ;</h3>

	<ul>
		{%for event in event_list %}
			<li><a href="/{{ event.id }}/eventDetail">
						{%for keys in event.keylist %}
								{{ keys }}
						{% endfor %}</a> - {{ event.timeLeft }} hours left</li>
		{% endfor %}
	</ul>


{% else %}

    <h3>Nothing Found</h3>

{% endif %}


{% endblock %}

