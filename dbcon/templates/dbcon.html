{% extends 'base.html' %}
{% load staticfiles %}


{% block title %}LaMa Events{% endblock %}


{% block inhead %}

<script src="{% static 'dbcon/jquery/jquery-1.11.1.min.js' %}"></script>
<script src="{% static 'dbcon/jquery/jquery-ui-1.11.1/jquery-ui.js' %}"></script>

<link rel="stylesheet" href="{% static 'dbcon/jquery/jquery-ui-themes-1.11.1/themes/smoothness/jquery-ui.css' %}"/>

<link rel="stylesheet" type="text/css" href="{% static 'dbcon/dbcon.css' %}" />

{% endblock %}



{% block script %}

$(function() {
	var pickerOpts = {
		dateFormat: 'dd-mm-yy',
		changeMonth: true,
		changeYear: true,
		showAnim: 'drop',
	};  
	$( "#datepicker" ).datepicker(pickerOpts);
    $( "#datepicker2" ).datepicker(pickerOpts);
});

{% endblock %}



{% block search %}

<br>

<table id="search_table">

	<tr>
		<form method="post" action="/">                                                             
			{% csrf_token %}
			<td> Search by Date : &nbsp	</td>
			<td> <input type="text" name="start_date" id="datepicker" placeholder="Start Date (dd-mm-yy)" required/>	</td>
			<td> <input type="text" name="end_date" id="datepicker2" placeholder="End Date (dd-mm-yy)" required/>	</td>
			<td> <button type="submit" name="date_picker">Search</button>	</td>
		</form>
	</tr>

	<tr>
		<form method="post" action="/">                                                             
			{% csrf_token %}
			<td> Search by Hour : &nbsp	</td>
			<td> <input type="number" name="search_hour" placeholder="Hour" required/>	</td>
			<td> <input type="number" name="hour_range" placeholder="Range" required/>	</td>
			<td> <button type="submit" name="ttee">Search</button>	</td>
		</form>
	</tr>

	<tr>
		<form method="post" action="/">                                                             
			{% csrf_token %}
			<td> Search by Keyterm : &nbsp	</td>
			<td> <input type="text" name="fst_key" placeholder="First Search Term" required/>	</td>
			<td> <input type="text" name="snd_key" placeholder="Second Search Term" />	</td>
			<td> <button type="submit" name="event_search">Search</button>	</td>
		</form>
	</tr>

</table>


{% endblock %}



{% block primary %}


{% if totallist%}


{% block monthseeker %}{% endblock %}

	
	<table>
		{% for x in totallist %}
			{% if forloop.counter0|divisibleby:5 %}<tr>{% endif %}
				{% if not x.eventObjlist %}
					{{ x.eventObjectlist }}
					<td id="outnoevetd">
						<table>
							<tr><a id ="noevent">{{ x.datelist }}</a></tr>
							<td id="innertd">  </td>
						</table>
					</td>
				{% else %}
					<td id="outevetd">
						<table>
							<a href="/{{ x.datelist }}/events" id="event">
							<tr>{{ x.datelist }}</tr></a>
							<td id="innertd">
								<ul id="inbox">
									&#x25BF &nbsp EVENTS &nbsp &#x25BF
									{% for eventObj in x.eventObjlist %}
										<a href="/{{ eventObj.id }}/eventDetail">
											<div id="keylistbox">
												{% for keys in eventObj.keylist %}
														{{ keys }}
												{% endfor %}
											</div></a>
									{% endfor %}
								</ul>
							</td>
						</table>
					</td>
			{% endif %}
			{% if forloop.counter|divisibleby:5 %}<tr>{% endif %}
		{% endfor %}
	</table>

{% else %}

	<h3>There is no date;</h3>
	<h4>'End Date' must comes after 'Start Date'</h4>

{% endif %}


{% endblock %}

